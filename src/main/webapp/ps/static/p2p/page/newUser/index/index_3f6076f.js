define("p2p:page/newUser/index/index.js",function(require,exports,module){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var $=require("common:widget/lib/jquery/jquery");require("common:widget/lib/jquery/swiper-2.7.6.min");var $statistic=require("common:node_modules/glpb-components-common/src/index").weStatistic,newBie=function(){function newBie(){_classCallCheck(this,newBie)}return newBie.prototype.init=function(){this.$modalBox=$(".modal-box"),this.initBanner(),this.handle(),$statistic.eventRaw({eventId:"pc_enter_new_user_page",extra:{source:document.referrer}})},newBie.prototype.initBanner=function(){$(".company-report-box").swiper({mode:"vertical",loop:!0,autoplay:5e3,autoplayDisableOnInteraction:!1}),$(".video-box").swiper({effect:"fade",loop:!0,autoplay:5e3,pagination:".swiper-pagination",paginationClickable:!0,autoplayDisableOnInteraction:!1})},newBie.prototype.handle=function(){var _this=this;$(".icon-we-close, #newcomer-award-rule-modal-button").on("click",function(){_this.closeModal()}),$(".modal-btn, #newcomer-award-rule").on("click",function(){_this.showModal($(this).data("modal-id"))}),$(".video-box").on("click","li",function(){var videoConfig={poster:$(this).data("video-poster"),videoUrl:$(this).data("video-url")};_this.showModal($(this).data("modal-id"),videoConfig)}),$(".article-more-btn").on("click",function(){var $articleBox=$(this).prev(".article-box"),showNum=$articleBox.data("show-num"),totalNum=$articleBox.data("total-num");if(showNum>=totalNum)$(this).hide();else if(10>totalNum-showNum)$articleBox.data("show-num",totalNum),$(this).hide(),$articleBox.find("li").show();else{showNum+=10;for(var i=showNum-10;showNum>i;i++)$articleBox.find("li").eq(i).show();$articleBox.data("show-num",showNum)}}),$(".link-btn").on("click",function(){var _this=this;$statistic.eventRaw({eventId:"pc_new_user_page_click_jump_button",extra:{buttonText:$(_this).text()}})}),$(".company-report-box a").on("click",function(){var _this=this;$statistic.eventRaw({eventId:"pc_new_user_page_click_everyone_newspaper_article",extra:{articleTitle:$(_this).attr("title")}})}),$(".user-share-content-box .video-box li").on("click",function(){var _this=this;$statistic.eventRaw({eventId:"pc_new_user_page_click__everyone_share_video",extra:{videoSource:$(_this).find("img").attr("src")}})}),$(".user-share-content-box .article-box a").on("click",function(){var _this=this;$statistic.eventRaw({eventId:"pc_new_user_page_click__everyone_share_article",extra:{articleTitle:$(_this).attr("title")}})})},newBie.prototype.showModal=function(modalId,videoConfig){var that=this;if("video-play-box"===modalId){var $myPlayer=$("#my-player");if(0===$myPlayer.length){var videoHtml='\n                    <video\n                        id="my-player"\n                        class="video-js vjs-big-play-centered"\n                        controls\n                        preload="auto"\n                        poster="'+videoConfig.poster+"\"\n                        data-setup='{}'>\n                        <source src=\""+videoConfig.videoUrl+'" type="video/mp4"></source>\n                        <p class="vjs-no-js">\n                            您使用的浏览器版本过低，不支持播放该视频，请升级浏览器！\n                        </p>\n                    </video>';$("#modal-video-play-box").html(videoHtml),that.videoPlayer=videojs("#my-player")}else that.videoPlayer.poster(videoConfig.poster),that.videoPlayer.src(videoConfig.videoUrl),that.videoPlayer.load(videoConfig.videoUrl)}$("."+modalId).show(),this.$modalBox.show()},newBie.prototype.closeModal=function(){this.videoPlayer&&this.videoPlayer.pause(),$(".modal-content").hide(),this.$modalBox.hide()},newBie}();module.exports=new newBie});